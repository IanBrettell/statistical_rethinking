<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="7.5 Model comparison | Notes for Statistical Rethinking 2nd ed. by Richard McElreath" />
<meta property="og:type" content="book" />






<meta name="date" content="2021-06-22" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="7.5 Model comparison | Notes for Statistical Rethinking 2nd ed. by Richard McElreath">

<title>7.5 Model comparison | Notes for Statistical Rethinking 2nd ed. by Richard McElreath</title>

<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#index">Index</a></li>
<li><a href="1-the-golem-of-prague.html#the-golem-of-prague"><span class="toc-section-number">1</span> The Golem of Prague</a></li>
<li><a href="2-small-worlds-and-large-worlds.html#small-worlds-and-large-worlds"><span class="toc-section-number">2</span> Small Worlds and Large Worlds</a>
<ul>
<li><a href="2-1-the-garden-of-forking-data.html#the-garden-of-forking-data"><span class="toc-section-number">2.1</span> The garden of forking data</a></li>
<li><a href="2-2-building-a-model.html#building-a-model"><span class="toc-section-number">2.2</span> Building a model</a></li>
<li><a href="2-3-components-of-the-model.html#components-of-the-model"><span class="toc-section-number">2.3</span> Components of the model</a></li>
<li><a href="2-4-making-the-model-go.html#making-the-model-go"><span class="toc-section-number">2.4</span> Making the model go</a></li>
</ul></li>
<li><a href="3-sampling-from-the-imaginary.html#sampling-from-the-imaginary"><span class="toc-section-number">3</span> Sampling from the Imaginary</a>
<ul>
<li><a href="3-1-sampling-from-a-grid-approximate-posterior.html#sampling-from-a-grid-approximate-posterior"><span class="toc-section-number">3.1</span> Sampling from a grid-approximate posterior</a></li>
<li><a href="3-2-sampling-to-summarize.html#sampling-to-summarize"><span class="toc-section-number">3.2</span> Sampling to summarize</a></li>
<li><a href="3-3-sampling-to-simulate-prediction.html#sampling-to-simulate-prediction"><span class="toc-section-number">3.3</span> Sampling to simulate prediction</a></li>
<li><a href="practice.html#practice">Practice</a></li>
<li><a href="homework-week-1.html#homework-week-1">Homework: week 1</a></li>
</ul></li>
<li><a href="4-geocentric-models.html#geocentric-models"><span class="toc-section-number">4</span> Geocentric Models</a>
<ul>
<li><a href="4-1-why-normal-distributions-are-normal.html#why-normal-distributions-are-normal"><span class="toc-section-number">4.1</span> Why normal distributions are normal</a></li>
<li><a href="4-2-a-language-for-describing-models.html#a-language-for-describing-models"><span class="toc-section-number">4.2</span> A language for describing models</a></li>
<li><a href="4-3-gaussian-model-of-height.html#gaussian-model-of-height"><span class="toc-section-number">4.3</span> Gaussian model of height</a></li>
<li><a href="4-4-linear-prediction.html#linear-prediction"><span class="toc-section-number">4.4</span> Linear prediction</a></li>
<li><a href="4-5-curves-from-lines.html#curves-from-lines"><span class="toc-section-number">4.5</span> Curves from lines</a></li>
<li><a href="4-6-practice-1.html#practice-1"><span class="toc-section-number">4.6</span> Practice</a></li>
</ul></li>
<li><a href="5-the-many-variables-the-spurious-waffles.html#the-many-variables-the-spurious-waffles"><span class="toc-section-number">5</span> The Many Variables &amp; The Spurious Waffles</a>
<ul>
<li><a href="5-1-spurious-association.html#spurious-association"><span class="toc-section-number">5.1</span> Spurious association</a></li>
<li><a href="5-2-masked-relationship.html#masked-relationship"><span class="toc-section-number">5.2</span> Masked relationship</a></li>
<li><a href="5-3-categorical-variables.html#categorical-variables"><span class="toc-section-number">5.3</span> Categorical variables</a></li>
<li><a href="5-4-practice-2.html#practice-2"><span class="toc-section-number">5.4</span> Practice</a></li>
</ul></li>
<li><a href="6-the-haunted-dag-the-causal-terror.html#the-haunted-dag-the-causal-terror"><span class="toc-section-number">6</span> The Haunted DAG &amp; The Causal Terror</a>
<ul>
<li><a href="6-1-multicollinearity.html#multicollinearity"><span class="toc-section-number">6.1</span> Multicollinearity</a></li>
<li><a href="6-2-post-treatment-bias.html#post-treatment-bias"><span class="toc-section-number">6.2</span> Post-treatment bias</a></li>
<li><a href="6-3-collider-bias.html#collider-bias"><span class="toc-section-number">6.3</span> Collider bias</a></li>
<li><a href="6-4-confronting-confounding.html#confronting-confounding"><span class="toc-section-number">6.4</span> Confronting confounding</a></li>
<li><a href="6-5-summary.html#summary"><span class="toc-section-number">6.5</span> Summary</a></li>
<li><a href="6-6-practice-3.html#practice-3"><span class="toc-section-number">6.6</span> Practice</a></li>
</ul></li>
<li><a href="7-ulysses-compass.html#ulysses-compass"><span class="toc-section-number">7</span> Ulysses’ Compass</a>
<ul>
<li><a href="7-1-the-problem-with-parameters.html#the-problem-with-parameters"><span class="toc-section-number">7.1</span> The problem with parameters</a></li>
<li><a href="7-2-entropy-and-accuracy.html#entropy-and-accuracy"><span class="toc-section-number">7.2</span> Entropy and accuracy</a></li>
<li><a href="7-3-golem-taming-regularization.html#golem-taming-regularization"><span class="toc-section-number">7.3</span> Golem taming: regularization</a></li>
<li><a href="7-4-predicting-predictive-accuracy.html#predicting-predictive-accuracy"><span class="toc-section-number">7.4</span> Predicting predictive accuracy</a></li>
<li><a href="7-5-model-comparison.html#model-comparison"><span class="toc-section-number">7.5</span> Model comparison</a></li>
<li><a href="7-6-practice-4.html#practice-4"><span class="toc-section-number">7.6</span> Practice</a></li>
</ul></li>
<li><a href="8-conditional-manatees.html#conditional-manatees"><span class="toc-section-number">8</span> Conditional Manatees</a></li>
<li><a href="9-markov-chain-monte-carlo.html#markov-chain-monte-carlo"><span class="toc-section-number">9</span> Markov Chain Monte Carlo</a></li>
<li><a href="10-big-entropy-and-the-generalized-linear-model.html#big-entropy-and-the-generalized-linear-model"><span class="toc-section-number">10</span> Big Entropy and the Generalized Linear Model</a></li>
<li><a href="11-god-spiked-the-integers.html#god-spiked-the-integers"><span class="toc-section-number">11</span> God Spiked the Integers</a></li>
<li><a href="12-monsters-and-mixtures.html#monsters-and-mixtures"><span class="toc-section-number">12</span> Monsters and Mixtures</a></li>
<li><a href="13-models-with-memory.html#models-with-memory"><span class="toc-section-number">13</span> Models With Memory</a></li>
<li><a href="14-adventures-in-covariance.html#adventures-in-covariance"><span class="toc-section-number">14</span> Adventures in Covariance</a></li>
<li><a href="15-missing-data-and-other-opportunities.html#missing-data-and-other-opportunities"><span class="toc-section-number">15</span> Missing Data and Other Opportunities</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="model-comparison" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Model comparison</h2>
<p>Road so far:</p>
<ul>
<li>When there are several plausible (and hopefully un-confounded) models for the same set of observations, how should we compare the accuracy of these models?</li>
<li>We need to somehow evaluate models out-of-sample. How can we do that? A meta-model of forecasting tells us two important things. First, flat priors produce bad predictions. Regularizing priors—priors which are skeptical of extreme parameter values—reduce fit to sample but tend to improve predictive accuracy.</li>
<li>Second, we can get a useful guess of predictive accuracy with the criteria CV, PSIS, and WAIC. Regularizing priors and CV/PSIS/WAIC are complementary. Regularization reduces overfitting, and predictive criteria measure it.</li>
</ul>
<p>You should never just keep the model that scores the best, and discard the rest. This kind of selection procedure discards the information about relative model accuracy contained in the differences among the CV/PSIS/WAIC values. Why are the differences useful? Because sometimes the differences are large and sometimes they are small. Just as relative posterior probability provides advice about how confident we might be about parameters (conditional on the model), relative model accuracy provides advice about how confident we might be about models (conditional on the set of models compared).</p>
<div class="figure">
<img src="slides/L08/29.png" alt="Avoid model selection. We want to score the expected overfitting models to understand their properties. In the sciences we usually have an inferential objective, rather than a predictive one. But if you intend to intervene in the world, then we don't want to use these criteria to select a model, but rather to compare them." width="60%" />
<p class="caption marginnote shownote">
Avoid model selection. We want to score the expected overfitting models to understand their properties. In the sciences we usually have an inferential objective, rather than a predictive one. But if you intend to intervene in the world, then we don’t want to use these criteria to select a model, but rather to compare them.
</p>
</div>
<p><strong><em>7.5.1. Model mis-selection</em></strong></p>
<p>Remember: Inferring cause and making predictions are different tasks. Cross-validation and WAIC aim to find models that make good predictions.</p>
<p>Run models from previous chapter again:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="7-5-model-comparison.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">71</span>)</span>
<span id="cb369-2"><a href="7-5-model-comparison.html#cb369-2" aria-hidden="true" tabindex="-1"></a><span class="co"># number of plants</span></span>
<span id="cb369-3"><a href="7-5-model-comparison.html#cb369-3" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb369-4"><a href="7-5-model-comparison.html#cb369-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-5"><a href="7-5-model-comparison.html#cb369-5" aria-hidden="true" tabindex="-1"></a><span class="co"># simulate initial heights</span></span>
<span id="cb369-6"><a href="7-5-model-comparison.html#cb369-6" aria-hidden="true" tabindex="-1"></a>h0 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(N,<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb369-7"><a href="7-5-model-comparison.html#cb369-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-8"><a href="7-5-model-comparison.html#cb369-8" aria-hidden="true" tabindex="-1"></a><span class="co"># assign treatments and simulate fungus and growth</span></span>
<span id="cb369-9"><a href="7-5-model-comparison.html#cb369-9" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">&lt;-</span> <span class="fu">rep</span>( <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span> , <span class="at">each=</span>N<span class="sc">/</span><span class="dv">2</span> )</span>
<span id="cb369-10"><a href="7-5-model-comparison.html#cb369-10" aria-hidden="true" tabindex="-1"></a>fungus <span class="ot">&lt;-</span> <span class="fu">rbinom</span>( N , <span class="at">size=</span><span class="dv">1</span> , <span class="at">prob=</span><span class="fl">0.5</span> <span class="sc">-</span> treatment<span class="sc">*</span><span class="fl">0.4</span> )</span>
<span id="cb369-11"><a href="7-5-model-comparison.html#cb369-11" aria-hidden="true" tabindex="-1"></a>h1 <span class="ot">&lt;-</span> h0 <span class="sc">+</span> <span class="fu">rnorm</span>(N, <span class="dv">5</span> <span class="sc">-</span> <span class="dv">3</span><span class="sc">*</span>fungus)</span>
<span id="cb369-12"><a href="7-5-model-comparison.html#cb369-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-13"><a href="7-5-model-comparison.html#cb369-13" aria-hidden="true" tabindex="-1"></a><span class="co"># compose a clean data frame</span></span>
<span id="cb369-14"><a href="7-5-model-comparison.html#cb369-14" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="at">h0=</span>h0 , <span class="at">h1=</span>h1 , <span class="at">treatment=</span>treatment , <span class="at">fungus=</span>fungus )</span>
<span id="cb369-15"><a href="7-5-model-comparison.html#cb369-15" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>(d)</span></code></pre></div>
<pre><code>##               mean        sd      5.5%    94.5%    histogram
## h0         9.95978 2.1011623  6.570328 13.07874 ▁▂▂▂▇▃▂▃▁▁▁▁
## h1        14.39920 2.6880870 10.618002 17.93369     ▁▁▃▇▇▇▁▁
## treatment  0.50000 0.5025189  0.000000  1.00000   ▇▁▁▁▁▁▁▁▁▇
## fungus     0.23000 0.4229526  0.000000  1.00000   ▇▁▁▁▁▁▁▁▁▂</code></pre>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="7-5-model-comparison.html#cb371-1" aria-hidden="true" tabindex="-1"></a>m6<span class="fl">.6</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb371-2"><a href="7-5-model-comparison.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb371-3"><a href="7-5-model-comparison.html#cb371-3" aria-hidden="true" tabindex="-1"></a>    h1 <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ),</span>
<span id="cb371-4"><a href="7-5-model-comparison.html#cb371-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> h0<span class="sc">*</span>p,</span>
<span id="cb371-5"><a href="7-5-model-comparison.html#cb371-5" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">~</span> <span class="fu">dlnorm</span>( <span class="dv">0</span> , <span class="fl">0.25</span> ),</span>
<span id="cb371-6"><a href="7-5-model-comparison.html#cb371-6" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb371-7"><a href="7-5-model-comparison.html#cb371-7" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">data=</span>d )</span>
<span id="cb371-8"><a href="7-5-model-comparison.html#cb371-8" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>(m6<span class="fl">.6</span>)</span></code></pre></div>
<pre><code>##           mean         sd     5.5%    94.5%
## p     1.426628 0.01759834 1.398503 1.454754
## sigma 1.792106 0.12496794 1.592383 1.991829</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="7-5-model-comparison.html#cb373-1" aria-hidden="true" tabindex="-1"></a>m6<span class="fl">.7</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb373-2"><a href="7-5-model-comparison.html#cb373-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb373-3"><a href="7-5-model-comparison.html#cb373-3" aria-hidden="true" tabindex="-1"></a>    h1 <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ),</span>
<span id="cb373-4"><a href="7-5-model-comparison.html#cb373-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> h0 <span class="sc">*</span> p,</span>
<span id="cb373-5"><a href="7-5-model-comparison.html#cb373-5" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> a <span class="sc">+</span> bt<span class="sc">*</span>treatment <span class="sc">+</span> bf<span class="sc">*</span>fungus,</span>
<span id="cb373-6"><a href="7-5-model-comparison.html#cb373-6" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dlnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ) ,</span>
<span id="cb373-7"><a href="7-5-model-comparison.html#cb373-7" aria-hidden="true" tabindex="-1"></a>    bt <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ),</span>
<span id="cb373-8"><a href="7-5-model-comparison.html#cb373-8" aria-hidden="true" tabindex="-1"></a>    bf <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ),</span>
<span id="cb373-9"><a href="7-5-model-comparison.html#cb373-9" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb373-10"><a href="7-5-model-comparison.html#cb373-10" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">data=</span>d )</span>
<span id="cb373-11"><a href="7-5-model-comparison.html#cb373-11" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>(m6<span class="fl">.7</span>)</span></code></pre></div>
<pre><code>##              mean         sd        5.5%       94.5%
## a      1.48139094 0.02451068  1.44221815  1.52056373
## bt     0.00241255 0.02986963 -0.04532488  0.05014998
## bf    -0.26671805 0.03654770 -0.32512833 -0.20830777
## sigma  1.40879638 0.09862052  1.25118174  1.56641102</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="7-5-model-comparison.html#cb375-1" aria-hidden="true" tabindex="-1"></a>m6<span class="fl">.8</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb375-2"><a href="7-5-model-comparison.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb375-3"><a href="7-5-model-comparison.html#cb375-3" aria-hidden="true" tabindex="-1"></a>    h1 <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ),</span>
<span id="cb375-4"><a href="7-5-model-comparison.html#cb375-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> h0 <span class="sc">*</span> p,</span>
<span id="cb375-5"><a href="7-5-model-comparison.html#cb375-5" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> a <span class="sc">+</span> bt<span class="sc">*</span>treatment,</span>
<span id="cb375-6"><a href="7-5-model-comparison.html#cb375-6" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dlnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ),</span>
<span id="cb375-7"><a href="7-5-model-comparison.html#cb375-7" aria-hidden="true" tabindex="-1"></a>    bt <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ),</span>
<span id="cb375-8"><a href="7-5-model-comparison.html#cb375-8" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb375-9"><a href="7-5-model-comparison.html#cb375-9" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">data=</span>d )</span>
<span id="cb375-10"><a href="7-5-model-comparison.html#cb375-10" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>(m6<span class="fl">.8</span>)</span></code></pre></div>
<pre><code>##             mean         sd       5.5%     94.5%
## a     1.38035157 0.02517700 1.34011386 1.4205893
## bt    0.08499494 0.03429912 0.03017831 0.1398116
## sigma 1.74641704 0.12193300 1.55154456 1.9412895</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="7-5-model-comparison.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">11</span>)</span>
<span id="cb377-2"><a href="7-5-model-comparison.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">WAIC</span>( m6<span class="fl">.7</span> )</span></code></pre></div>
<pre><code>##       WAIC      lppd penalty  std_err
## 1 361.4511 -177.1724  3.5532 14.17035</code></pre>
<div class="figure">
<img src="slides/L08/30.png" alt="Smaller numbers are better, so the top model is 6.7 that includes the fungus. Can probably see the difference here. The fungus is what's causal. Inference about cause and finding a predictive model aren't the same thing. So you need to do both, but keep in mind that they're different. Because you haven't necessarily inferred a cause if you have good prediction error, because you might have blocked a pipe. Even spurious correlations are useful. The confounding really matters when you want to intervene. The highest preditive model won't necessary predict what will happen when you intervene. " width="60%" />
<p class="caption marginnote shownote">
Smaller numbers are better, so the top model is 6.7 that includes the fungus. Can probably see the difference here. The fungus is what’s causal. Inference about cause and finding a predictive model aren’t the same thing. So you need to do both, but keep in mind that they’re different. Because you haven’t necessarily inferred a cause if you have good prediction error, because you might have blocked a pipe. Even spurious correlations are useful. The confounding really matters when you want to intervene. The highest preditive model won’t necessary predict what will happen when you intervene.
</p>
</div>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="7-5-model-comparison.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">77</span>)</span>
<span id="cb379-2"><a href="7-5-model-comparison.html#cb379-2" aria-hidden="true" tabindex="-1"></a>rethinking<span class="sc">::</span><span class="fu">compare</span>( m6<span class="fl">.6</span> , m6<span class="fl">.7</span> ,m6<span class="fl">.8</span> , <span class="at">func=</span>WAIC )</span></code></pre></div>
<pre><code>##          WAIC       SE    dWAIC      dSE    pWAIC       weight
## m6.7 361.8901 14.26191  0.00000       NA 3.839493 1.000000e+00
## m6.8 402.7753 11.28120 40.88517 10.47814 2.645589 1.324032e-09
## m6.6 405.9174 11.66153 44.02729 12.23018 1.582861 2.751664e-10</code></pre>
<p><img src="slides/L08/31.png" width="60%" /></p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="7-5-model-comparison.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">91</span>)</span>
<span id="cb381-2"><a href="7-5-model-comparison.html#cb381-2" aria-hidden="true" tabindex="-1"></a>waic_m6<span class="fl">.7</span> <span class="ot">&lt;-</span> <span class="fu">WAIC</span>( m6<span class="fl">.7</span> , <span class="at">pointwise=</span><span class="cn">TRUE</span> )<span class="sc">$</span>WAIC</span>
<span id="cb381-3"><a href="7-5-model-comparison.html#cb381-3" aria-hidden="true" tabindex="-1"></a>waic_m6<span class="fl">.8</span> <span class="ot">&lt;-</span> <span class="fu">WAIC</span>( m6<span class="fl">.8</span> , <span class="at">pointwise=</span><span class="cn">TRUE</span> )<span class="sc">$</span>WAIC</span>
<span id="cb381-4"><a href="7-5-model-comparison.html#cb381-4" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(waic_m6<span class="fl">.7</span>)</span>
<span id="cb381-5"><a href="7-5-model-comparison.html#cb381-5" aria-hidden="true" tabindex="-1"></a>diff_m6<span class="fl">.7</span>_m6<span class="fl">.8</span> <span class="ot">&lt;-</span> waic_m6<span class="fl">.7</span> <span class="sc">-</span> waic_m6<span class="fl">.8</span></span>
<span id="cb381-6"><a href="7-5-model-comparison.html#cb381-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>( n<span class="sc">*</span><span class="fu">var</span>( diff_m6<span class="fl">.7</span>_m6<span class="fl">.8</span> ) )</span></code></pre></div>
<pre><code>## [1] 10.35785</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="7-5-model-comparison.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fl">40.0</span> <span class="sc">+</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>)<span class="sc">*</span><span class="fl">10.4</span><span class="sc">*</span><span class="fl">2.6</span></span></code></pre></div>
<pre><code>## [1] 12.96 67.04</code></pre>
<p><img src="slides/L08/32.png" width="60%" /></p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="7-5-model-comparison.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( rethinking<span class="sc">::</span><span class="fu">compare</span>( m6<span class="fl">.6</span> , m6<span class="fl">.7</span> , m6<span class="fl">.8</span> ) )</span></code></pre></div>
<p><img src="07_ulysses_compass_files/figure-html/7.29-1.png" width="672" /></p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="7-5-model-comparison.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">92</span>)</span>
<span id="cb386-2"><a href="7-5-model-comparison.html#cb386-2" aria-hidden="true" tabindex="-1"></a>waic_m6<span class="fl">.6</span> <span class="ot">&lt;-</span> <span class="fu">WAIC</span>( m6<span class="fl">.6</span> , <span class="at">pointwise=</span><span class="cn">TRUE</span> )<span class="sc">$</span>WAIC</span>
<span id="cb386-3"><a href="7-5-model-comparison.html#cb386-3" aria-hidden="true" tabindex="-1"></a>diff_m6<span class="fl">.6</span>_m6<span class="fl">.8</span> <span class="ot">&lt;-</span> waic_m6<span class="fl">.6</span> <span class="sc">-</span> waic_m6<span class="fl">.8</span></span>
<span id="cb386-4"><a href="7-5-model-comparison.html#cb386-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>( n<span class="sc">*</span><span class="fu">var</span>( diff_m6<span class="fl">.6</span>_m6<span class="fl">.8</span> ) )</span></code></pre></div>
<pre><code>## [1] 4.858914</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="7-5-model-comparison.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">93</span>)</span>
<span id="cb388-2"><a href="7-5-model-comparison.html#cb388-2" aria-hidden="true" tabindex="-1"></a>rethinking<span class="sc">::</span><span class="fu">compare</span>( m6<span class="fl">.6</span> , m6<span class="fl">.7</span> , m6<span class="fl">.8</span> )<span class="sc">@</span>dSE</span></code></pre></div>
<pre><code>##           m6.6     m6.7      m6.8
## m6.6        NA 12.20638  4.934353
## m6.7 12.206380       NA 10.426576
## m6.8  4.934353 10.42658        NA</code></pre>
<p><strong><em>7.5.2. Outliers and other illusions</em></strong></p>
<p>In the divorce example from Chapter 5, we saw in the posterior predictions that a few States were very hard for the model to retrodict. The State of Idaho in particular was something of an outlier. Individual points like Idaho tend to be very influential in ordinary regression models. Let’s see how PSIS and WAIC represent that importance.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="7-5-model-comparison.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rethinking)</span>
<span id="cb390-2"><a href="7-5-model-comparison.html#cb390-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(WaffleDivorce)</span>
<span id="cb390-3"><a href="7-5-model-comparison.html#cb390-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> WaffleDivorce</span>
<span id="cb390-4"><a href="7-5-model-comparison.html#cb390-4" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>A <span class="ot">&lt;-</span> <span class="fu">standardize</span>( d<span class="sc">$</span>MedianAgeMarriage )</span>
<span id="cb390-5"><a href="7-5-model-comparison.html#cb390-5" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>D <span class="ot">&lt;-</span> <span class="fu">standardize</span>( d<span class="sc">$</span>Divorce )</span>
<span id="cb390-6"><a href="7-5-model-comparison.html#cb390-6" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>M <span class="ot">&lt;-</span> <span class="fu">standardize</span>( d<span class="sc">$</span>Marriage )</span>
<span id="cb390-7"><a href="7-5-model-comparison.html#cb390-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb390-8"><a href="7-5-model-comparison.html#cb390-8" aria-hidden="true" tabindex="-1"></a>m5<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb390-9"><a href="7-5-model-comparison.html#cb390-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb390-10"><a href="7-5-model-comparison.html#cb390-10" aria-hidden="true" tabindex="-1"></a>    D <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb390-11"><a href="7-5-model-comparison.html#cb390-11" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> bA <span class="sc">*</span> A ,</span>
<span id="cb390-12"><a href="7-5-model-comparison.html#cb390-12" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ) ,</span>
<span id="cb390-13"><a href="7-5-model-comparison.html#cb390-13" aria-hidden="true" tabindex="-1"></a>    bA <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb390-14"><a href="7-5-model-comparison.html#cb390-14" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb390-15"><a href="7-5-model-comparison.html#cb390-15" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data =</span> d )</span>
<span id="cb390-16"><a href="7-5-model-comparison.html#cb390-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb390-17"><a href="7-5-model-comparison.html#cb390-17" aria-hidden="true" tabindex="-1"></a>m5<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb390-18"><a href="7-5-model-comparison.html#cb390-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb390-19"><a href="7-5-model-comparison.html#cb390-19" aria-hidden="true" tabindex="-1"></a>    D <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb390-20"><a href="7-5-model-comparison.html#cb390-20" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> bM <span class="sc">*</span> M ,</span>
<span id="cb390-21"><a href="7-5-model-comparison.html#cb390-21" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ) ,</span>
<span id="cb390-22"><a href="7-5-model-comparison.html#cb390-22" aria-hidden="true" tabindex="-1"></a>    bM <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb390-23"><a href="7-5-model-comparison.html#cb390-23" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb390-24"><a href="7-5-model-comparison.html#cb390-24" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data =</span> d )</span>
<span id="cb390-25"><a href="7-5-model-comparison.html#cb390-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb390-26"><a href="7-5-model-comparison.html#cb390-26" aria-hidden="true" tabindex="-1"></a>m5<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb390-27"><a href="7-5-model-comparison.html#cb390-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb390-28"><a href="7-5-model-comparison.html#cb390-28" aria-hidden="true" tabindex="-1"></a>    D <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb390-29"><a href="7-5-model-comparison.html#cb390-29" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> bM<span class="sc">*</span>M <span class="sc">+</span> bA<span class="sc">*</span>A ,</span>
<span id="cb390-30"><a href="7-5-model-comparison.html#cb390-30" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ) ,</span>
<span id="cb390-31"><a href="7-5-model-comparison.html#cb390-31" aria-hidden="true" tabindex="-1"></a>    bM <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb390-32"><a href="7-5-model-comparison.html#cb390-32" aria-hidden="true" tabindex="-1"></a>    bA <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb390-33"><a href="7-5-model-comparison.html#cb390-33" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb390-34"><a href="7-5-model-comparison.html#cb390-34" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data =</span> d )</span></code></pre></div>
<p>Let’s compare these models with PSIS</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="7-5-model-comparison.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">24071847</span>)</span>
<span id="cb391-2"><a href="7-5-model-comparison.html#cb391-2" aria-hidden="true" tabindex="-1"></a>rethinking<span class="sc">::</span><span class="fu">compare</span>( m5<span class="fl">.1</span> , m5<span class="fl">.2</span> , m5<span class="fl">.3</span> , <span class="at">func=</span>PSIS )</span></code></pre></div>
<pre><code>## Some Pareto k values are high (&gt;0.5). Set pointwise=TRUE to inspect individual points.
## Some Pareto k values are high (&gt;0.5). Set pointwise=TRUE to inspect individual points.</code></pre>
<pre><code>## Some Pareto k values are very high (&gt;1). Set pointwise=TRUE to inspect individual points.</code></pre>
<pre><code>##          PSIS       SE     dPSIS       dSE    pPSIS       weight
## m5.1 127.5665 14.69485  0.000000        NA 4.671425 0.8340176286
## m5.3 130.8062 16.15696  3.239685  1.808671 6.578663 0.1650769863
## m5.2 141.2178 11.56557 13.651299 10.923820 4.057204 0.0009053851</code></pre>
<p>First note that the model that omits marriage rate, m5.1, lands on top. This is because marriage rate has very little association with the outcome. So the model that omits it has slightly better expected out-of-sample performance, even though it actually fits the sample slightly worse than m5.3, the model with both predictors.</p>
<p><code>Some Pareto k values are very high (&gt;1).</code> means that the smoothing approximation that PSIS uses is unreliable for some points.</p>
<p>Let’s look at the individual States, to see which are causing the problem. We can do this by adding <code>pointwise=TRUE</code> to PSIS. When you do this, you get a matrix with each observation on a row and the PSIS information, including individual Pareto k values, in columns.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="7-5-model-comparison.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">24071847</span>)</span>
<span id="cb395-2"><a href="7-5-model-comparison.html#cb395-2" aria-hidden="true" tabindex="-1"></a>PSIS_m5<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">PSIS</span>(m5<span class="fl">.3</span>,<span class="at">pointwise=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Some Pareto k values are very high (&gt;1). Set pointwise=TRUE to inspect individual points.</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="7-5-model-comparison.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">24071847</span>)</span>
<span id="cb397-2"><a href="7-5-model-comparison.html#cb397-2" aria-hidden="true" tabindex="-1"></a>WAIC_m5<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">WAIC</span>(m5<span class="fl">.3</span>,<span class="at">pointwise=</span><span class="cn">TRUE</span>)</span>
<span id="cb397-3"><a href="7-5-model-comparison.html#cb397-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( PSIS_m5<span class="fl">.3</span><span class="sc">$</span>k , WAIC_m5<span class="fl">.3</span><span class="sc">$</span>penalty , <span class="at">xlab=</span><span class="st">&quot;PSIS Pareto k&quot;</span> ,</span>
<span id="cb397-4"><a href="7-5-model-comparison.html#cb397-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab=</span><span class="st">&quot;WAIC penalty&quot;</span> , <span class="at">col=</span>rangi2 , <span class="at">lwd=</span><span class="dv">2</span> )</span></code></pre></div>
<p><img src="07_ulysses_compass_files/figure-html/7.34-1.png" width="672" /></p>
<p>One way to both use these extreme observations and reduce their influence is to employ some kind of ROBUST REGRESSION. A “robust regression” can mean many different things, but usually it indicates a linear model in which the influence of extreme observations is reduced. A common and useful kind of robust regression is to replace the Gaussian model with a thicker-tailed distribution like STUDENT’S T (or “Student-t”) distribution.</p>
<p>Let’s re-estimate the divorce model using a Student-t distribution with <span class="math inline">\(v = 2\)</span>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="7-5-model-comparison.html#cb398-1" aria-hidden="true" tabindex="-1"></a>m5<span class="fl">.3</span>t <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb398-2"><a href="7-5-model-comparison.html#cb398-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb398-3"><a href="7-5-model-comparison.html#cb398-3" aria-hidden="true" tabindex="-1"></a>    D <span class="sc">~</span> <span class="fu">dstudent</span>( <span class="dv">2</span> , mu , sigma ) ,</span>
<span id="cb398-4"><a href="7-5-model-comparison.html#cb398-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> bM<span class="sc">*</span>M <span class="sc">+</span> bA<span class="sc">*</span>A ,</span>
<span id="cb398-5"><a href="7-5-model-comparison.html#cb398-5" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.2</span> ) ,</span>
<span id="cb398-6"><a href="7-5-model-comparison.html#cb398-6" aria-hidden="true" tabindex="-1"></a>    bM <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb398-7"><a href="7-5-model-comparison.html#cb398-7" aria-hidden="true" tabindex="-1"></a>    bA <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.5</span> ) ,</span>
<span id="cb398-8"><a href="7-5-model-comparison.html#cb398-8" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb398-9"><a href="7-5-model-comparison.html#cb398-9" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data =</span> d )</span>
<span id="cb398-10"><a href="7-5-model-comparison.html#cb398-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-11"><a href="7-5-model-comparison.html#cb398-11" aria-hidden="true" tabindex="-1"></a><span class="fu">PSIS</span>(m5<span class="fl">.3</span>t)</span></code></pre></div>
<pre><code>##       PSIS      lppd  penalty  std_err
## 1 133.7104 -66.85521 6.845203 11.94534</code></pre>
<div class="figure">
<img src="slides/L08/33.png" alt="Incredibly clever and diabolical. Interested in life history evolution. Something to understand by looking at the whole field. Here's a dataset to consider. Why does lifespan vary so much? A typcial kind of conceptual model is this idea that body mass = fewer things kill you = living longer. And brain size = smart = avoiding danger. Should also season your DAG with some unobserved confounds." width="60%" />
<p class="caption marginnote shownote">
Incredibly clever and diabolical. Interested in life history evolution. Something to understand by looking at the whole field. Here’s a dataset to consider. Why does lifespan vary so much? A typcial kind of conceptual model is this idea that body mass = fewer things kill you = living longer. And brain size = smart = avoiding danger. Should also season your DAG with some unobserved confounds.
</p>
</div>
<div class="figure">
<img src="slides/L08/34.png" alt="After you remove all the missing values, you get three models. The first is the industry standard m7.8 everyone expects to be the right prediction model. WIf we wnat ot figure out the infleucne of brainsize on lifespan, we need to block the backdoor path on body mass. Black dots are the in-sample, and open are the WAIC scores. Bars are standard errors. 7.8 and 7.9 are basically equivalent in their out-of-sample predictions. When you see something like this, you should see this as an invitiation to poke inside them. You can use IC to do that poiking." width="60%" />
<p class="caption marginnote shownote">
After you remove all the missing values, you get three models. The first is the industry standard m7.8 everyone expects to be the right prediction model. WIf we wnat ot figure out the infleucne of brainsize on lifespan, we need to block the backdoor path on body mass. Black dots are the in-sample, and open are the WAIC scores. Bars are standard errors. 7.8 and 7.9 are basically equivalent in their out-of-sample predictions. When you see something like this, you should see this as an invitiation to poke inside them. You can use IC to do that poiking.
</p>
</div>
<div class="figure">
<img src="slides/L08/35.png" alt="bM is the slope for body mass, and bB is the slope for brain size. 7.9 only has bM, and says there's a positive correlation. The model with both has this catastrophic flipping. Now bM is negative? What's going on here? " width="60%" />
<p class="caption marginnote shownote">
bM is the slope for body mass, and bB is the slope for brain size. 7.9 only has bM, and says there’s a positive correlation. The model with both has this catastrophic flipping. Now bM is negative? What’s going on here?
</p>
</div>
<div class="figure">
<img src="slides/L08/36.png" alt="The thing to do here is to do WAIC point-wise. For each species in the sample, say the Capuchin monkey which has those life history characteristics, which model expects to do the best out-of-sample on organisms with those same covariates? Or you could think about it as entropy scores, or divergence scores, to say how surprised is this model by a Capuchin monkey? The relative surprise between these models is plotted. " width="60%" />
<p class="caption marginnote shownote">
The thing to do here is to do WAIC point-wise. For each species in the sample, say the Capuchin monkey which has those life history characteristics, which model expects to do the best out-of-sample on organisms with those same covariates? Or you could think about it as entropy scores, or divergence scores, to say how surprised is this model by a Capuchin monkey? The relative surprise between these models is plotted.
</p>
</div>
<div class="figure">
<img src="slides/L08/37.png" alt="The model with brain + mass does better with Capuchins because they have small brains, but they're really big for their body size. So if you don't control for body size, you can't explain their longevity. So the model without body size is really surprised by Cebus. Lepilemur on the other extreme with small brains and extremely short lifespans, where you'd be surprised if you ignore body size." width="60%" />
<p class="caption marginnote shownote">
The model with brain + mass does better with Capuchins because they have small brains, but they’re really big for their body size. So if you don’t control for body size, you can’t explain their longevity. So the model without body size is really surprised by Cebus. Lepilemur on the other extreme with small brains and extremely short lifespans, where you’d be surprised if you ignore body size.
</p>
</div>
<div class="figure">
<img src="slides/L08/38.png" alt="On the other hand, for these you can make fine predictions by knowing body size. So you can understand how they perform if you look point-wise. This is a principled way to inspect and understand your golem. Also a way to find your high-leverage points." width="60%" />
<p class="caption marginnote shownote">
On the other hand, for these you can make fine predictions by knowing body size. So you can understand how they perform if you look point-wise. This is a principled way to inspect and understand your golem. Also a way to find your high-leverage points.
</p>
</div>
<p><img src="slides/L08/39.png" width="80%" /></p>
<p><img src="slides/L08/40.png" width="80%" /></p>
<p><img src="slides/L08/41.png" width="80%" /></p>
<p><img src="slides/L08/42.png" width="80%" /></p>
</div>
<p style="text-align: center;">
<a href="7-4-predicting-predictive-accuracy.html"><button class="btn btn-default">Previous</button></a>
<a href="7-6-practice-4.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
