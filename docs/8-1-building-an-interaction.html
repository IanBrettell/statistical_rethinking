<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="8.1 Building an interaction | Notes for Statistical Rethinking 2nd ed. by Richard McElreath" />
<meta property="og:type" content="book" />






<meta name="date" content="2021-07-02" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="8.1 Building an interaction | Notes for Statistical Rethinking 2nd ed. by Richard McElreath">

<title>8.1 Building an interaction | Notes for Statistical Rethinking 2nd ed. by Richard McElreath</title>

<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#index">Index</a></li>
<li><a href="1-the-golem-of-prague.html#the-golem-of-prague"><span class="toc-section-number">1</span> The Golem of Prague</a></li>
<li><a href="2-small-worlds-and-large-worlds.html#small-worlds-and-large-worlds"><span class="toc-section-number">2</span> Small Worlds and Large Worlds</a>
<ul>
<li><a href="2-1-the-garden-of-forking-data.html#the-garden-of-forking-data"><span class="toc-section-number">2.1</span> The garden of forking data</a></li>
<li><a href="2-2-building-a-model.html#building-a-model"><span class="toc-section-number">2.2</span> Building a model</a></li>
<li><a href="2-3-components-of-the-model.html#components-of-the-model"><span class="toc-section-number">2.3</span> Components of the model</a></li>
<li><a href="2-4-making-the-model-go.html#making-the-model-go"><span class="toc-section-number">2.4</span> Making the model go</a></li>
</ul></li>
<li><a href="3-sampling-from-the-imaginary.html#sampling-from-the-imaginary"><span class="toc-section-number">3</span> Sampling from the Imaginary</a>
<ul>
<li><a href="3-1-sampling-from-a-grid-approximate-posterior.html#sampling-from-a-grid-approximate-posterior"><span class="toc-section-number">3.1</span> Sampling from a grid-approximate posterior</a></li>
<li><a href="3-2-sampling-to-summarize.html#sampling-to-summarize"><span class="toc-section-number">3.2</span> Sampling to summarize</a></li>
<li><a href="3-3-sampling-to-simulate-prediction.html#sampling-to-simulate-prediction"><span class="toc-section-number">3.3</span> Sampling to simulate prediction</a></li>
<li><a href="practice.html#practice">Practice</a></li>
<li><a href="homework-week-1.html#homework-week-1">Homework: week 1</a></li>
</ul></li>
<li><a href="4-geocentric-models.html#geocentric-models"><span class="toc-section-number">4</span> Geocentric Models</a>
<ul>
<li><a href="4-1-why-normal-distributions-are-normal.html#why-normal-distributions-are-normal"><span class="toc-section-number">4.1</span> Why normal distributions are normal</a></li>
<li><a href="4-2-a-language-for-describing-models.html#a-language-for-describing-models"><span class="toc-section-number">4.2</span> A language for describing models</a></li>
<li><a href="4-3-gaussian-model-of-height.html#gaussian-model-of-height"><span class="toc-section-number">4.3</span> Gaussian model of height</a></li>
<li><a href="4-4-linear-prediction.html#linear-prediction"><span class="toc-section-number">4.4</span> Linear prediction</a></li>
<li><a href="4-5-curves-from-lines.html#curves-from-lines"><span class="toc-section-number">4.5</span> Curves from lines</a></li>
<li><a href="4-6-practice-1.html#practice-1"><span class="toc-section-number">4.6</span> Practice</a></li>
</ul></li>
<li><a href="5-the-many-variables-the-spurious-waffles.html#the-many-variables-the-spurious-waffles"><span class="toc-section-number">5</span> The Many Variables &amp; The Spurious Waffles</a>
<ul>
<li><a href="5-1-spurious-association.html#spurious-association"><span class="toc-section-number">5.1</span> Spurious association</a></li>
<li><a href="5-2-masked-relationship.html#masked-relationship"><span class="toc-section-number">5.2</span> Masked relationship</a></li>
<li><a href="5-3-categorical-variables.html#categorical-variables"><span class="toc-section-number">5.3</span> Categorical variables</a></li>
<li><a href="5-4-practice-2.html#practice-2"><span class="toc-section-number">5.4</span> Practice</a></li>
</ul></li>
<li><a href="6-the-haunted-dag-the-causal-terror.html#the-haunted-dag-the-causal-terror"><span class="toc-section-number">6</span> The Haunted DAG &amp; The Causal Terror</a>
<ul>
<li><a href="6-1-multicollinearity.html#multicollinearity"><span class="toc-section-number">6.1</span> Multicollinearity</a></li>
<li><a href="6-2-post-treatment-bias.html#post-treatment-bias"><span class="toc-section-number">6.2</span> Post-treatment bias</a></li>
<li><a href="6-3-collider-bias.html#collider-bias"><span class="toc-section-number">6.3</span> Collider bias</a></li>
<li><a href="6-4-confronting-confounding.html#confronting-confounding"><span class="toc-section-number">6.4</span> Confronting confounding</a></li>
<li><a href="6-5-summary.html#summary"><span class="toc-section-number">6.5</span> Summary</a></li>
<li><a href="6-6-practice-3.html#practice-3"><span class="toc-section-number">6.6</span> Practice</a></li>
</ul></li>
<li><a href="7-ulysses-compass.html#ulysses-compass"><span class="toc-section-number">7</span> Ulysses’ Compass</a>
<ul>
<li><a href="7-1-the-problem-with-parameters.html#the-problem-with-parameters"><span class="toc-section-number">7.1</span> The problem with parameters</a></li>
<li><a href="7-2-entropy-and-accuracy.html#entropy-and-accuracy"><span class="toc-section-number">7.2</span> Entropy and accuracy</a></li>
<li><a href="7-3-golem-taming-regularization.html#golem-taming-regularization"><span class="toc-section-number">7.3</span> Golem taming: regularization</a></li>
<li><a href="7-4-predicting-predictive-accuracy.html#predicting-predictive-accuracy"><span class="toc-section-number">7.4</span> Predicting predictive accuracy</a></li>
<li><a href="7-5-model-comparison.html#model-comparison"><span class="toc-section-number">7.5</span> Model comparison</a></li>
<li><a href="7-6-practice-4.html#practice-4"><span class="toc-section-number">7.6</span> Practice</a></li>
</ul></li>
<li><a href="8-conditional-manatees.html#conditional-manatees"><span class="toc-section-number">8</span> Conditional Manatees</a>
<ul>
<li><a href="8-1-building-an-interaction.html#building-an-interaction"><span class="toc-section-number">8.1</span> Building an interaction</a></li>
<li><a href="8-2-symmetry-of-interactions.html#symmetry-of-interactions"><span class="toc-section-number">8.2</span> Symmetry of interactions</a></li>
<li><a href="8-3-continuous-interactions.html#continuous-interactions"><span class="toc-section-number">8.3</span> Continuous interactions</a></li>
</ul></li>
<li><a href="9-markov-chain-monte-carlo.html#markov-chain-monte-carlo"><span class="toc-section-number">9</span> Markov Chain Monte Carlo</a>
<ul>
<li><a href="9-1-good-king-markov-and-his-island-kingdom.html#good-king-markov-and-his-island-kingdom"><span class="toc-section-number">9.1</span> Good King Markov and his island kingdom</a></li>
<li><a href="9-2-metropolis-algorithm.html#metropolis-algorithm"><span class="toc-section-number">9.2</span> Metropolis algorithm</a></li>
<li><a href="9-3-hamiltonian-monte-carlo.html#hamiltonian-monte-carlo"><span class="toc-section-number">9.3</span> Hamiltonian Monte Carlo</a></li>
<li><a href="9-4-easy-hmc-ulam.html#easy-hmc-ulam"><span class="toc-section-number">9.4</span> Easy HMC: <code>ulam</code></a></li>
<li><a href="9-5-care-and-feeding-of-your-markov-chain.html#care-and-feeding-of-your-markov-chain"><span class="toc-section-number">9.5</span> Care and feeding of your Markov chain</a></li>
</ul></li>
<li><a href="10-big-entropy-and-the-generalized-linear-model.html#big-entropy-and-the-generalized-linear-model"><span class="toc-section-number">10</span> Big Entropy and the Generalized Linear Model</a>
<ul>
<li><a href="10-1-maximum-entropy.html#maximum-entropy"><span class="toc-section-number">10.1</span> Maximum entropy</a></li>
</ul></li>
<li><a href="11-god-spiked-the-integers.html#god-spiked-the-integers"><span class="toc-section-number">11</span> God Spiked the Integers</a></li>
<li><a href="12-monsters-and-mixtures.html#monsters-and-mixtures"><span class="toc-section-number">12</span> Monsters and Mixtures</a></li>
<li><a href="13-models-with-memory.html#models-with-memory"><span class="toc-section-number">13</span> Models With Memory</a></li>
<li><a href="14-adventures-in-covariance.html#adventures-in-covariance"><span class="toc-section-number">14</span> Adventures in Covariance</a></li>
<li><a href="15-missing-data-and-other-opportunities.html#missing-data-and-other-opportunities"><span class="toc-section-number">15</span> Missing Data and Other Opportunities</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="building-an-interaction" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Building an interaction</h2>
<div class="figure">
<img src="slides/L09/15.png" alt="Economics of Africa. Africa is really really big. A lot of diversity - economies, language, environment - makes it interesting because it creates a lot of natural experiments." width="80%" />
<p class="caption marginnote shownote">
Economics of Africa. Africa is really really big. A lot of diversity - economies, language, environment - makes it interesting because it creates a lot of natural experiments.
</p>
</div>
<div class="figure">
<img src="slides/L09/16.png" alt="There's a feature of the terrain which is ruggedness, which is bad becasuse it makes it hard to move things. On the right is normalised. 0 is perfectly flat, 1 is Lesotho, the world's most rugged place. Kind of like Switzerland. Really strong negative relationship with GDP. But in Africa, the relationship goes in the other direction. Removing outliers doesn't remove the difference between the continents. So what's going on?" width="80%" />
<p class="caption marginnote shownote">
There’s a feature of the terrain which is ruggedness, which is bad becasuse it makes it hard to move things. On the right is normalised. 0 is perfectly flat, 1 is Lesotho, the world’s most rugged place. Kind of like Switzerland. Really strong negative relationship with GDP. But in Africa, the relationship goes in the other direction. Removing outliers doesn’t remove the difference between the continents. So what’s going on?
</p>
</div>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="8-1-building-an-interaction.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rethinking)</span>
<span id="cb402-2"><a href="8-1-building-an-interaction.html#cb402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(rugged)</span>
<span id="cb402-3"><a href="8-1-building-an-interaction.html#cb402-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> rugged</span>
<span id="cb402-4"><a href="8-1-building-an-interaction.html#cb402-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-5"><a href="8-1-building-an-interaction.html#cb402-5" aria-hidden="true" tabindex="-1"></a><span class="co"># make log version of outcome</span></span>
<span id="cb402-6"><a href="8-1-building-an-interaction.html#cb402-6" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>log_gdp <span class="ot">&lt;-</span> <span class="fu">log</span>( d<span class="sc">$</span>rgdppc_2000 )</span>
<span id="cb402-7"><a href="8-1-building-an-interaction.html#cb402-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-8"><a href="8-1-building-an-interaction.html#cb402-8" aria-hidden="true" tabindex="-1"></a><span class="co"># extract countries with GDP data</span></span>
<span id="cb402-9"><a href="8-1-building-an-interaction.html#cb402-9" aria-hidden="true" tabindex="-1"></a>dd <span class="ot">&lt;-</span> d[ <span class="fu">complete.cases</span>(d<span class="sc">$</span>rgdppc_2000) , ]</span>
<span id="cb402-10"><a href="8-1-building-an-interaction.html#cb402-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-11"><a href="8-1-building-an-interaction.html#cb402-11" aria-hidden="true" tabindex="-1"></a><span class="co"># rescale variables</span></span>
<span id="cb402-12"><a href="8-1-building-an-interaction.html#cb402-12" aria-hidden="true" tabindex="-1"></a>dd<span class="sc">$</span>log_gdp_std <span class="ot">&lt;-</span> dd<span class="sc">$</span>log_gdp <span class="sc">/</span> <span class="fu">mean</span>(dd<span class="sc">$</span>log_gdp)</span>
<span id="cb402-13"><a href="8-1-building-an-interaction.html#cb402-13" aria-hidden="true" tabindex="-1"></a>dd<span class="sc">$</span>rugged_std <span class="ot">&lt;-</span> dd<span class="sc">$</span>rugged <span class="sc">/</span> <span class="fu">max</span>(dd<span class="sc">$</span>rugged)</span></code></pre></div>
<p>Remember that using <span class="math inline">\(\bar{r}\)</span> just makes it easier to assign a prior to the intercept <span class="math inline">\(\alpha\)</span>.</p>
<p>Consider first the intercept, <span class="math inline">\(\alpha\)</span>, defined as the log GDP when ruggedness is at the sample mean. So it must be close to 1, because we scaled the outcome so that the mean is 1.</p>
<p>Now for <span class="math inline">\(\beta\)</span>, the slope. If we center it on zero, that indicates no bias for positive or negative, which makes sense. But what about the standard deviation? Let’s start with a guess at 1.</p>
<p>And finally, let’s assign <span class="math inline">\(\sigma\)</span> something very broad, <span class="math inline">\(\sigma \sim Exponential(1)\)</span>.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="8-1-building-an-interaction.html#cb403-1" aria-hidden="true" tabindex="-1"></a>m8<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb403-2"><a href="8-1-building-an-interaction.html#cb403-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb403-3"><a href="8-1-building-an-interaction.html#cb403-3" aria-hidden="true" tabindex="-1"></a>    log_gdp_std <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb403-4"><a href="8-1-building-an-interaction.html#cb403-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> b<span class="sc">*</span>( rugged_std <span class="sc">-</span> <span class="fl">0.215</span> ) ,</span>
<span id="cb403-5"><a href="8-1-building-an-interaction.html#cb403-5" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">1</span> , <span class="dv">1</span> ) ,</span>
<span id="cb403-6"><a href="8-1-building-an-interaction.html#cb403-6" aria-hidden="true" tabindex="-1"></a>    b <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="dv">1</span> ) ,</span>
<span id="cb403-7"><a href="8-1-building-an-interaction.html#cb403-7" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb403-8"><a href="8-1-building-an-interaction.html#cb403-8" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data=</span>dd )</span></code></pre></div>
<div class="figure">
<img src="slides/L09/17.png" alt="We want to develop priors that constrain pre-data the outcomes to the possible outcome space. We've scaled the outcome between 0 and 1. Then I've taken log GDP, and scaled it in proportion to the average. 1.5 is 50% more. Think about doubling the economy - that would be a huge effect. The dashed lines are the world's GDPs. We've centered at 1 for the average GDP. We simulate priors and we get chaos. At least on the right you can stay within the world's possible economies." width="80%" />
<p class="caption marginnote shownote">
We want to develop priors that constrain pre-data the outcomes to the possible outcome space. We’ve scaled the outcome between 0 and 1. Then I’ve taken log GDP, and scaled it in proportion to the average. 1.5 is 50% more. Think about doubling the economy - that would be a huge effect. The dashed lines are the world’s GDPs. We’ve centered at 1 for the average GDP. We simulate priors and we get chaos. At least on the right you can stay within the world’s possible economies.
</p>
</div>
<p>Let’s look at the prior predictions:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="8-1-building-an-interaction.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">7</span>)</span>
<span id="cb404-2"><a href="8-1-building-an-interaction.html#cb404-2" aria-hidden="true" tabindex="-1"></a>prior <span class="ot">&lt;-</span> <span class="fu">extract.prior</span>( m8<span class="fl">.1</span> )</span>
<span id="cb404-3"><a href="8-1-building-an-interaction.html#cb404-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb404-4"><a href="8-1-building-an-interaction.html#cb404-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set up the plot dimensions</span></span>
<span id="cb404-5"><a href="8-1-building-an-interaction.html#cb404-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( <span class="cn">NULL</span> , <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) , <span class="at">ylim=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">1.5</span>) ,</span>
<span id="cb404-6"><a href="8-1-building-an-interaction.html#cb404-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab=</span><span class="st">&quot;ruggedness&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;log GDP&quot;</span> )</span>
<span id="cb404-7"><a href="8-1-building-an-interaction.html#cb404-7" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>( <span class="at">h=</span><span class="fu">min</span>(dd<span class="sc">$</span>log_gdp_std) , <span class="at">lty=</span><span class="dv">2</span> )</span>
<span id="cb404-8"><a href="8-1-building-an-interaction.html#cb404-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>( <span class="at">h=</span><span class="fu">max</span>(dd<span class="sc">$</span>log_gdp_std) , <span class="at">lty=</span><span class="dv">2</span> )</span>
<span id="cb404-9"><a href="8-1-building-an-interaction.html#cb404-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb404-10"><a href="8-1-building-an-interaction.html#cb404-10" aria-hidden="true" tabindex="-1"></a><span class="co"># draw 50 lines from the prior</span></span>
<span id="cb404-11"><a href="8-1-building-an-interaction.html#cb404-11" aria-hidden="true" tabindex="-1"></a>rugged_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="at">from=</span><span class="sc">-</span><span class="fl">0.1</span> , <span class="at">to=</span><span class="fl">1.1</span> , <span class="at">length.out=</span><span class="dv">30</span> )</span>
<span id="cb404-12"><a href="8-1-building-an-interaction.html#cb404-12" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">link</span>( m8<span class="fl">.1</span> , <span class="at">post=</span>prior , <span class="at">data=</span><span class="fu">data.frame</span>(<span class="at">rugged_std=</span>rugged_seq) )</span>
<span id="cb404-13"><a href="8-1-building-an-interaction.html#cb404-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span> ) <span class="fu">lines</span>( rugged_seq , mu[i,] , <span class="at">col=</span><span class="fu">col.alpha</span>(<span class="st">&quot;black&quot;</span>,<span class="fl">0.3</span>) )</span></code></pre></div>
<p><img src="08_conditional_manatees_files/figure-html/8.3-1.svg" width="672" /></p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="8-1-building-an-interaction.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>( <span class="fu">abs</span>(prior<span class="sc">$</span>b) <span class="sc">&gt;</span> <span class="fl">0.6</span> ) <span class="sc">/</span> <span class="fu">length</span>(prior<span class="sc">$</span>b)</span></code></pre></div>
<pre><code>## [1] 0.545</code></pre>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="8-1-building-an-interaction.html#cb407-1" aria-hidden="true" tabindex="-1"></a>m8<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb407-2"><a href="8-1-building-an-interaction.html#cb407-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb407-3"><a href="8-1-building-an-interaction.html#cb407-3" aria-hidden="true" tabindex="-1"></a>    log_gdp_std <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb407-4"><a href="8-1-building-an-interaction.html#cb407-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a <span class="sc">+</span> b<span class="sc">*</span>( rugged_std <span class="sc">-</span> <span class="fl">0.215</span> ) ,</span>
<span id="cb407-5"><a href="8-1-building-an-interaction.html#cb407-5" aria-hidden="true" tabindex="-1"></a>    a <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">1</span> , <span class="fl">0.1</span> ) ,</span>
<span id="cb407-6"><a href="8-1-building-an-interaction.html#cb407-6" aria-hidden="true" tabindex="-1"></a>    b <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.3</span> ) ,</span>
<span id="cb407-7"><a href="8-1-building-an-interaction.html#cb407-7" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>(<span class="dv">1</span>)</span>
<span id="cb407-8"><a href="8-1-building-an-interaction.html#cb407-8" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data=</span>dd )</span></code></pre></div>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="8-1-building-an-interaction.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>( m8<span class="fl">.1</span> )</span></code></pre></div>
<pre><code>##              mean          sd       5.5%      94.5%
## a     0.999999515 0.010411972  0.9833592 1.01663986
## b     0.001990935 0.054793464 -0.0855796 0.08956147
## sigma 0.136497402 0.007396152  0.1246769 0.14831788</code></pre>
<p>Really no overall association between terrain ruggedness and log GDP. Next we’ll see how to split apart the continents.</p>
<p><strong><em>8.1.2. Adding an indicator variable isn’t enough</em></strong></p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="8-1-building-an-interaction.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make variable to index Africa (1) or not (2)</span></span>
<span id="cb410-2"><a href="8-1-building-an-interaction.html#cb410-2" aria-hidden="true" tabindex="-1"></a>dd<span class="sc">$</span>cid <span class="ot">&lt;-</span> <span class="fu">ifelse</span>( dd<span class="sc">$</span>cont_africa<span class="sc">==</span><span class="dv">1</span> , <span class="dv">1</span> , <span class="dv">2</span> )</span></code></pre></div>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="8-1-building-an-interaction.html#cb411-1" aria-hidden="true" tabindex="-1"></a>m8<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb411-2"><a href="8-1-building-an-interaction.html#cb411-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb411-3"><a href="8-1-building-an-interaction.html#cb411-3" aria-hidden="true" tabindex="-1"></a>    log_gdp_std <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb411-4"><a href="8-1-building-an-interaction.html#cb411-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a[cid] <span class="sc">+</span> b<span class="sc">*</span>( rugged_std <span class="sc">-</span> <span class="fl">0.215</span> ) ,</span>
<span id="cb411-5"><a href="8-1-building-an-interaction.html#cb411-5" aria-hidden="true" tabindex="-1"></a>    a[cid] <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">1</span> , <span class="fl">0.1</span> ) ,</span>
<span id="cb411-6"><a href="8-1-building-an-interaction.html#cb411-6" aria-hidden="true" tabindex="-1"></a>    b <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.3</span> ) ,</span>
<span id="cb411-7"><a href="8-1-building-an-interaction.html#cb411-7" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb411-8"><a href="8-1-building-an-interaction.html#cb411-8" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data=</span>dd )</span></code></pre></div>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="8-1-building-an-interaction.html#cb412-1" aria-hidden="true" tabindex="-1"></a>rethinking<span class="sc">::</span><span class="fu">compare</span>( m8<span class="fl">.1</span> , m8<span class="fl">.2</span> )</span></code></pre></div>
<pre><code>##           WAIC       SE    dWAIC      dSE    pWAIC       weight
## m8.2 -252.2694 15.30363  0.00000       NA 4.258180 1.000000e+00
## m8.1 -188.7489 13.29716 63.52044 15.14767 2.693351 1.609579e-14</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="8-1-building-an-interaction.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>( m8<span class="fl">.2</span> , <span class="at">depth=</span><span class="dv">2</span> )</span></code></pre></div>
<pre><code>##              mean          sd       5.5%     94.5%
## a[1]   0.88041699 0.015937691  0.8549455 0.9058885
## a[2]   1.04915863 0.010185998  1.0328794 1.0654378
## b     -0.04651242 0.045688674 -0.1195318 0.0265069
## sigma  0.11239229 0.006091743  0.1026565 0.1221281</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="8-1-building-an-interaction.html#cb416-1" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> <span class="fu">extract.samples</span>(m8<span class="fl">.2</span>)</span>
<span id="cb416-2"><a href="8-1-building-an-interaction.html#cb416-2" aria-hidden="true" tabindex="-1"></a>diff_a1_a2 <span class="ot">&lt;-</span> post<span class="sc">$</span>a[,<span class="dv">1</span>] <span class="sc">-</span> post<span class="sc">$</span>a[,<span class="dv">2</span>]</span>
<span id="cb416-3"><a href="8-1-building-an-interaction.html#cb416-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PI</span>( diff_a1_a2 )</span></code></pre></div>
<pre><code>##         5%        94% 
## -0.1990056 -0.1378378</code></pre>
<p>The difference is reliably below zero.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="8-1-building-an-interaction.html#cb418-1" aria-hidden="true" tabindex="-1"></a>rugged.seq <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="at">from=</span><span class="sc">-</span><span class="fl">0.1</span> , <span class="at">to=</span><span class="fl">1.1</span> , <span class="at">length.out=</span><span class="dv">30</span> )</span>
<span id="cb418-2"><a href="8-1-building-an-interaction.html#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="co"># compute mu over samples, fixing cid=2 and then cid=1</span></span>
<span id="cb418-3"><a href="8-1-building-an-interaction.html#cb418-3" aria-hidden="true" tabindex="-1"></a>mu.NotAfrica <span class="ot">&lt;-</span> <span class="fu">link</span>( m8<span class="fl">.2</span> ,</span>
<span id="cb418-4"><a href="8-1-building-an-interaction.html#cb418-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span><span class="fu">data.frame</span>( <span class="at">cid=</span><span class="dv">2</span> , <span class="at">rugged_std=</span>rugged.seq ) )</span>
<span id="cb418-5"><a href="8-1-building-an-interaction.html#cb418-5" aria-hidden="true" tabindex="-1"></a>mu.Africa <span class="ot">&lt;-</span> <span class="fu">link</span>( m8<span class="fl">.2</span> ,</span>
<span id="cb418-6"><a href="8-1-building-an-interaction.html#cb418-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span><span class="fu">data.frame</span>( <span class="at">cid=</span><span class="dv">1</span> , <span class="at">rugged_std=</span>rugged.seq ) )</span>
<span id="cb418-7"><a href="8-1-building-an-interaction.html#cb418-7" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize to means and intervals</span></span>
<span id="cb418-8"><a href="8-1-building-an-interaction.html#cb418-8" aria-hidden="true" tabindex="-1"></a>mu.NotAfrica_mu <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu.NotAfrica , <span class="dv">2</span> , mean )</span>
<span id="cb418-9"><a href="8-1-building-an-interaction.html#cb418-9" aria-hidden="true" tabindex="-1"></a>mu.NotAfrica_ci <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu.NotAfrica , <span class="dv">2</span> , PI , <span class="at">prob=</span><span class="fl">0.97</span> )</span>
<span id="cb418-10"><a href="8-1-building-an-interaction.html#cb418-10" aria-hidden="true" tabindex="-1"></a>mu.Africa_mu <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu.Africa , <span class="dv">2</span> , mean )</span>
<span id="cb418-11"><a href="8-1-building-an-interaction.html#cb418-11" aria-hidden="true" tabindex="-1"></a>mu.Africa_ci <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu.Africa , <span class="dv">2</span> , PI , <span class="at">prob=</span><span class="fl">0.97</span> )</span></code></pre></div>
<div class="figure">
<img src="slides/L09/18.png" alt="These two plots come from splitting the data. This is cheating, because now you have no statistical criterion on which to evaluate the split. Need to estimate both of the lines in the same model. DOn't split it yourself - let the model split it and tell you how compelling it is." width="80%" />
<p class="caption marginnote shownote">
These two plots come from splitting the data. This is cheating, because now you have no statistical criterion on which to evaluate the split. Need to estimate both of the lines in the same model. DOn’t split it yourself - let the model split it and tell you how compelling it is.
</p>
</div>
<div class="figure">
<img src="slides/L09/19.png" alt="Using an index variable that is continent ID. 1 means Africa, 2 means not Africa. Can do it for each continent. Different $\alpha$ for each continent. Now you can assign the same prior to all of the continents. We run the model and get the graphs on the right. The intercepts now have changed, and African countries are depressed relative to non-African countries." width="80%" />
<p class="caption marginnote shownote">
Using an index variable that is continent ID. 1 means Africa, 2 means not Africa. Can do it for each continent. Different <span class="math inline">\(\alpha\)</span> for each continent. Now you can assign the same prior to all of the continents. We run the model and get the graphs on the right. The intercepts now have changed, and African countries are depressed relative to non-African countries.
</p>
</div>
<p><strong><em>8.1.3. Adding an interaction does work</em></strong></p>
<p>This just means making the slope conditional on continent.</p>
<div class="figure">
<img src="slides/L09/20.png" alt="Just add the index variable to the slope. Now we have a separete slope for ecah continent. Centered the GDP so that the intercept makes sense. " width="80%" />
<p class="caption marginnote shownote">
Just add the index variable to the slope. Now we have a separete slope for ecah continent. Centered the GDP so that the intercept makes sense.
</p>
</div>
<p><img src="slides/L09/21.png" width="80%" /></p>
<div class="figure">
<img src="slides/L09/22.png" alt="Here are the marginal posterior distributions. Index of 1 means Africa, 2 means not Africa. Average GDP is lower. At the mean ruggedness, in the world, an African country has 90% of the average GDP in the sample. How does GDP change? It's postivie for AFrican countries `b[1]`, and `b[2]` is negative. Basically the same magnitude." width="80%" />
<p class="caption marginnote shownote">
Here are the marginal posterior distributions. Index of 1 means Africa, 2 means not Africa. Average GDP is lower. At the mean ruggedness, in the world, an African country has 90% of the average GDP in the sample. How does GDP change? It’s postivie for AFrican countries <code>b[1]</code>, and <code>b[2]</code> is negative. Basically the same magnitude.
</p>
</div>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="8-1-building-an-interaction.html#cb419-1" aria-hidden="true" tabindex="-1"></a>m8<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">quap</span>(</span>
<span id="cb419-2"><a href="8-1-building-an-interaction.html#cb419-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alist</span>(</span>
<span id="cb419-3"><a href="8-1-building-an-interaction.html#cb419-3" aria-hidden="true" tabindex="-1"></a>    log_gdp_std <span class="sc">~</span> <span class="fu">dnorm</span>( mu , sigma ) ,</span>
<span id="cb419-4"><a href="8-1-building-an-interaction.html#cb419-4" aria-hidden="true" tabindex="-1"></a>    mu <span class="ot">&lt;-</span> a[cid] <span class="sc">+</span> b[cid]<span class="sc">*</span>( rugged_std <span class="sc">-</span> <span class="fl">0.215</span> ) ,</span>
<span id="cb419-5"><a href="8-1-building-an-interaction.html#cb419-5" aria-hidden="true" tabindex="-1"></a>    a[cid] <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">1</span> , <span class="fl">0.1</span> ) ,</span>
<span id="cb419-6"><a href="8-1-building-an-interaction.html#cb419-6" aria-hidden="true" tabindex="-1"></a>    b[cid] <span class="sc">~</span> <span class="fu">dnorm</span>( <span class="dv">0</span> , <span class="fl">0.3</span> ) ,</span>
<span id="cb419-7"><a href="8-1-building-an-interaction.html#cb419-7" aria-hidden="true" tabindex="-1"></a>    sigma <span class="sc">~</span> <span class="fu">dexp</span>( <span class="dv">1</span> )</span>
<span id="cb419-8"><a href="8-1-building-an-interaction.html#cb419-8" aria-hidden="true" tabindex="-1"></a>  ) , <span class="at">data=</span>dd )</span></code></pre></div>
<div class="figure">
<img src="slides/L09/23.png" alt="Now they're from the same model. Looks the same. The slope on the left is less certain. Compatibility bowtie is bigger because there are fewer African countries. " width="80%" />
<p class="caption marginnote shownote">
Now they’re from the same model. Looks the same. The slope on the left is less certain. Compatibility bowtie is bigger because there are fewer African countries.
</p>
</div>
<div class="figure">
<img src="slides/L09/24.png" alt="Here we're just looking at two categories, but it can get confusing quickly, especially if you don't center the variables. Need to plot to understand. **Whenever you have an interaction, the impact of a change in one predictor depends on more that one parameter.** So you can't look at a single row and guess what the effect is of changing things. You need them all. This is why plotting is so essential." width="80%" />
<p class="caption marginnote shownote">
Here we’re just looking at two categories, but it can get confusing quickly, especially if you don’t center the variables. Need to plot to understand. <strong>Whenever you have an interaction, the impact of a change in one predictor depends on more that one parameter.</strong> So you can’t look at a single row and guess what the effect is of changing things. You need them all. This is why plotting is so essential.
</p>
</div>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="8-1-building-an-interaction.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>( m8<span class="fl">.3</span> , <span class="at">depth=</span><span class="dv">2</span> )</span></code></pre></div>
<pre><code>##             mean          sd        5.5%       94.5%
## a[1]   0.8865645 0.015675847  0.86151150  0.91161756
## a[2]   1.0505692 0.009936704  1.03468847  1.06645001
## b[1]   0.1325084 0.074205126  0.01391424  0.25110248
## b[2]  -0.1425752 0.054749925 -0.23007613 -0.05507422
## sigma  0.1094952 0.005935445  0.10000921  0.11898118</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="8-1-building-an-interaction.html#cb422-1" aria-hidden="true" tabindex="-1"></a>rethinking<span class="sc">::</span><span class="fu">compare</span>( m8<span class="fl">.1</span> , m8<span class="fl">.2</span> , m8<span class="fl">.3</span> , <span class="at">func=</span>PSIS )</span></code></pre></div>
<pre><code>## Some Pareto k values are high (&gt;0.5). Set pointwise=TRUE to inspect individual points.
## Some Pareto k values are high (&gt;0.5). Set pointwise=TRUE to inspect individual points.</code></pre>
<pre><code>##           PSIS       SE     dPSIS       dSE    pPSIS       weight
## m8.3 -259.1220 15.21109  0.000000        NA 5.170213 9.714330e-01
## m8.2 -252.0690 15.39890  7.053043  6.653285 4.339043 2.856696e-02
## m8.1 -188.5937 13.37057 70.528334 15.436418 2.750995 4.703051e-16</code></pre>
<p>Model family m8.3 has more than 95% of the weight. That’s very strong support for including the interaction effect, if prediction is our goal. But the modicum of weight given to <code>m8.2</code> suggests that the posterior means for the slopes in <code>m8.3</code> are a little overfit.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="8-1-building-an-interaction.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( <span class="fu">PSIS</span>( m8<span class="fl">.3</span> , <span class="at">pointwise=</span><span class="cn">TRUE</span> )<span class="sc">$</span>k )</span></code></pre></div>
<p><img src="08_conditional_manatees_files/figure-html/8.16-1.svg" width="672" /></p>
<p><strong><em>8.1.4. Plotting the interaction</em></strong></p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="8-1-building-an-interaction.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot Africa - cid=1</span></span>
<span id="cb426-2"><a href="8-1-building-an-interaction.html#cb426-2" aria-hidden="true" tabindex="-1"></a>d.A1 <span class="ot">&lt;-</span> dd[ dd<span class="sc">$</span>cid<span class="sc">==</span><span class="dv">1</span> , ]</span>
<span id="cb426-3"><a href="8-1-building-an-interaction.html#cb426-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( d.A1<span class="sc">$</span>rugged_std , d.A1<span class="sc">$</span>log_gdp_std , <span class="at">pch=</span><span class="dv">16</span> , <span class="at">col=</span>rangi2 ,</span>
<span id="cb426-4"><a href="8-1-building-an-interaction.html#cb426-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab=</span><span class="st">&quot;ruggedness (standardized)&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;log GDP (as proportion of mean)&quot;</span> ,</span>
<span id="cb426-5"><a href="8-1-building-an-interaction.html#cb426-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) )</span>
<span id="cb426-6"><a href="8-1-building-an-interaction.html#cb426-6" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">link</span>( m8<span class="fl">.3</span> , <span class="at">data=</span><span class="fu">data.frame</span>( <span class="at">cid=</span><span class="dv">1</span> , <span class="at">rugged_std=</span>rugged_seq ) )</span>
<span id="cb426-7"><a href="8-1-building-an-interaction.html#cb426-7" aria-hidden="true" tabindex="-1"></a>mu_mean <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu , <span class="dv">2</span> , mean )</span>
<span id="cb426-8"><a href="8-1-building-an-interaction.html#cb426-8" aria-hidden="true" tabindex="-1"></a>mu_ci <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu , <span class="dv">2</span> , PI , <span class="at">prob=</span><span class="fl">0.97</span> )</span>
<span id="cb426-9"><a href="8-1-building-an-interaction.html#cb426-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>( rugged_seq , mu_mean , <span class="at">lwd=</span><span class="dv">2</span> )</span>
<span id="cb426-10"><a href="8-1-building-an-interaction.html#cb426-10" aria-hidden="true" tabindex="-1"></a><span class="fu">shade</span>( mu_ci , rugged_seq , <span class="at">col=</span><span class="fu">col.alpha</span>(rangi2,<span class="fl">0.3</span>) )</span>
<span id="cb426-11"><a href="8-1-building-an-interaction.html#cb426-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-12"><a href="8-1-building-an-interaction.html#cb426-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">&quot;African nations&quot;</span>)</span></code></pre></div>
<p><img src="08_conditional_manatees_files/figure-html/unnamed-chunk-28-1.svg" width="672" /></p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="8-1-building-an-interaction.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot non-Africa - cid=2</span></span>
<span id="cb427-2"><a href="8-1-building-an-interaction.html#cb427-2" aria-hidden="true" tabindex="-1"></a>d.A0 <span class="ot">&lt;-</span> dd[ dd<span class="sc">$</span>cid<span class="sc">==</span><span class="dv">2</span> , ]</span>
<span id="cb427-3"><a href="8-1-building-an-interaction.html#cb427-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( d.A0<span class="sc">$</span>rugged_std , d.A0<span class="sc">$</span>log_gdp_std , <span class="at">pch=</span><span class="dv">1</span> , <span class="at">col=</span><span class="st">&quot;black&quot;</span> ,</span>
<span id="cb427-4"><a href="8-1-building-an-interaction.html#cb427-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab=</span><span class="st">&quot;ruggedness (standardized)&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;log GDP (as proportion of mean)&quot;</span> ,</span>
<span id="cb427-5"><a href="8-1-building-an-interaction.html#cb427-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) )</span>
<span id="cb427-6"><a href="8-1-building-an-interaction.html#cb427-6" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">link</span>( m8<span class="fl">.3</span> , <span class="at">data=</span><span class="fu">data.frame</span>( <span class="at">cid=</span><span class="dv">2</span> , <span class="at">rugged_std=</span>rugged_seq ) )</span>
<span id="cb427-7"><a href="8-1-building-an-interaction.html#cb427-7" aria-hidden="true" tabindex="-1"></a>mu_mean <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu , <span class="dv">2</span> , mean )</span>
<span id="cb427-8"><a href="8-1-building-an-interaction.html#cb427-8" aria-hidden="true" tabindex="-1"></a>mu_ci <span class="ot">&lt;-</span> <span class="fu">apply</span>( mu , <span class="dv">2</span> , PI , <span class="at">prob=</span><span class="fl">0.97</span> )</span>
<span id="cb427-9"><a href="8-1-building-an-interaction.html#cb427-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>( rugged_seq , mu_mean , <span class="at">lwd=</span><span class="dv">2</span> )</span>
<span id="cb427-10"><a href="8-1-building-an-interaction.html#cb427-10" aria-hidden="true" tabindex="-1"></a><span class="fu">shade</span>( mu_ci , rugged_seq )</span>
<span id="cb427-11"><a href="8-1-building-an-interaction.html#cb427-11" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">&quot;Non-African nations&quot;</span>)</span></code></pre></div>
<p><img src="08_conditional_manatees_files/figure-html/unnamed-chunk-28-2.svg" width="672" /></p>
</div>
<p style="text-align: center;">
<a href="8-conditional-manatees.html"><button class="btn btn-default">Previous</button></a>
<a href="8-2-symmetry-of-interactions.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
